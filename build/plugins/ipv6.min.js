!function(){BOOMR=window.BOOMR||{};BOOMR.plugins=BOOMR.plugins||{};if(!BOOMR.plugins.IPv6){var a={complete:!1,ipv6_url:"",host_url:"",timeout:1200,timers:{ipv6:{start:null,end:null},host:{start:null,end:null}},start:function(){this.load_img("ipv6","host")},load_img:function(){var a,b="?t="+BOOMR.utils.generateId(10),c=0,d=null,e=this,f=Array.prototype.shift.call(arguments),g=arguments;if(!f||!this.timers.hasOwnProperty(f)){this.done();return!1}if(!this[f+"_url"])return this.load_img.apply(this,g);a=new Image;a.onload=function(){e.timers[f].end=(new Date).getTime();clearTimeout(c);a.onload=a.onerror=null;a=null;e.load_img.apply(e,g);e=g=null};d=function(){e.timers[f].supported=!1;clearTimeout(c);a.onload=a.onerror=null;a=null;e.done();e=g=null};a.onerror=d;c=setTimeout(d,this.timeout);this.timers[f].start=(new Date).getTime();a.src=this[f+"_url"]+b;return!0},done:function(){if(!this.complete){BOOMR.removeVar("ipv6_latency","ipv6_lookup");null!==this.timers.ipv6.end?BOOMR.addVar("ipv6_latency",this.timers.ipv6.end-this.timers.ipv6.start):BOOMR.addVar("ipv6_latency","NA");null!==this.timers.host.end?BOOMR.addVar("ipv6_lookup",this.timers.host.end-this.timers.host.start):BOOMR.addVar("ipv6_lookup","NA");this.complete=!0;BOOMR.sendBeacon()}},skip:function(){if(!this.complete){this.complete=!0;BOOMR.sendBeacon()}return this}};BOOMR.plugins.IPv6={init:function(b){BOOMR.utils.pluginConfig(a,b,"IPv6",["ipv6_url","host_url","timeout"]);if(b&&b.wait)return this;if(!a.ipv6_url){BOOMR.warn("IPv6.ipv6_url is not set.  Cannot run IPv6 test.","ipv6");a.complete=!0;return this}a.host_url||BOOMR.warn("IPv6.host_url is not set.  Will skip hostname test.","ipv6");if("https:"===BOOMR.window.location.protocol){a.complete=!0;return this}a.ipv6_url=a.ipv6_url.replace(/^https:/,"http:");a.host_url=a.host_url.replace(/^https:/,"http:");BOOMR.subscribe("page_ready",a.start,null,a);BOOMR.subscribe("before_unload",a.skip,null,a);return this},is_complete:function(){return a.complete}}}}();
//# sourceMappingURL=ipv6.min.js.map